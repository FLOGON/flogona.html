<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>Star Tree – Working Version</title>
<style>
* { box-sizing: border-box; }

body{
  margin:0;
  width:100vw;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#000014;
  overflow:hidden;
  perspective:800px;
}

.scene{
  width:300px;
  height:500px;
  position:relative;
  transform-style:preserve-3d;
}

.tree{
  position:absolute;
  inset:0;
  transform-style:preserve-3d;
  animation: spin 16s linear infinite;
}

.star{
  position:absolute;
  left:50%;
  bottom:0;
  width:4px;
  height:4px;
  background:white;
  border-radius:50%;
  box-shadow:
    0 0 6px white,
    0 0 12px #cfffff;
  opacity:0;

  transform:
    rotateZ(var(--angle))
    translateX(var(--radius))
    translateY(calc(-1 * var(--y)));

  animation:
    stack 0.6s ease-out forwards,
    twinkle 2.5s ease-in-out infinite;
}

.top-star{
  width:10px;
  height:10px;
  left:50%;
  bottom:100%;
  box-shadow:
    0 0 12px #fff,
    0 0 24px #ffffcc;
  opacity:1;
  transform:translateX(-50%);
}

@keyframes spin{
  from { transform: rotateY(0deg); }
  to   { transform: rotateY(360deg); }
}

@keyframes stack{
  from{
    opacity:0;
    transform:
      rotateZ(var(--angle))
      translateX(var(--radius))
      translateY(20px);
    filter:blur(3px);
  }
  to{
    opacity:1;
    transform:
      rotateZ(var(--angle))
      translateX(var(--radius))
      translateY(calc(-1 * var(--y)));
    filter:blur(0);
  }
}

@keyframes twinkle{
  0%,100%{ opacity:0.6; }
  50%{ opacity:1; }
}
</style>
</head>
<body>

<div class="scene">
  <div class="tree" id="tree"></div>
</div>

<script>
const tree = document.getElementById('tree');
const N = 220;

for(let i = 0; i < N; i++){
  const star = document.createElement('div');
  star.className = 'star';

  const h = i / N;              // height ratio
  const radius = (1 - h) * 120; // tree width
  const angle = i * 137.5;      // golden angle

  star.style.setProperty('--y', `${h * 460}px`);
  star.style.setProperty('--radius', `${radius}px`);
  star.style.setProperty('--angle', `${angle}deg`);

  // 층별로 등장
  const delay = Math.floor(i / 12) * 0.15;
  star.style.animationDelay = `${delay}s`;

  tree.appendChild(star);
}

// top star
const top = document.createElement('div');
top.className = 'star top-star';
tree.appendChild(top);
</script>

</body>
</html>
