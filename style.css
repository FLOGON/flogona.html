/* =================================== */
/* 1. 기본 설정 및 3D 환경 정의 */
/* =================================== */

body {
    background: #000014; 
    display: grid;
    place-content: center;
    overflow-x: hidden;
    margin: 0;
    height: 100vh;
    /* 원근감(Perspective) 설정 - 3D 깊이감을 결정 */
    perspective: 35em; 
}

/* 모든 3D 요소에 필요 */
div {
    transform-style: preserve-3d;
}

/* 트리를 감싸는 컨테이너 */
.tree {
    width: 0;
    height: 0;
    position: relative;
    /* --- 트리를 Y축 중심으로 회전시키는 애니메이션 --- */
    animation: roty-y 12s linear infinite reverse; 
}

/* =================================== */
/* 2. 별 모양 및 3D 위치 계산 (수직 정렬을 위해 수정됨) */
/* =================================== */

.a3d {
    --m: calc(.5*(var(--n-stars) - 1)); 
    --t: calc(0.3333*var(--n-stars)*0.1s); 

    /* 별의 기본 스타일 */
    position: absolute;
    width: 2em; 
    height: 2em;
    background: #fff;
    
    /* 별 모양 생성 (8각 별) */
    clip-path: polygon(
        50% 0%, 60% 35%, 100% 35%, 65% 60%, 80% 100%, 50% 75%, 20% 100%, 35% 60%, 0% 35%, 40% 35%
    );

    /* 빛 효과 */
    filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.7)) drop-shadow(0 0 10px #70e3ff);
    
    /* ***** 3D 변환 순서 수정: 트리를 수직으로 세우는 핵심 ***** */
    transform: 
        /* 1. Y축 회전: 별들을 원형으로 배치 */
        rotateY(calc(var(--i) * 360deg / var(--n-stars)))
        
        /* 2. Z축 이동: 원뿔의 반지름을 결정 (트리의 폭) */
        translateZ(calc(var(--m) * 0.7vmin))
        
        /* 3. X축 회전: 별을 원뿔 중앙을 향하도록 기울입니다. (트리의 옆면 각도) */
        rotateX(90deg)
        
        /* 4. Y축 이동: 별을 위아래로 쌓아 트리 높이를 만듭니다. (i가 클수록 위로) */
        translateY(calc(var(--i) * 0.7em - 10em))
        
        /* 5. 별 자체의 회전 (선택 사항) */
        rotate(calc(var(--i) * 10deg));
        
    /* 개별 별의 애니메이션 (반짝임이나 자체 회전 효과를 위한 애니메이션) */
    /* animation: roty 12s linear var(--t) infinite reverse;
    animation-delay: calc(var(--i) * -0.1s); */ 
}


/* =================================== */
/* 3. 애니메이션 키프레임 정의 */
/* =================================== */

/* 트리를 Y축(수직축) 중심으로 회전시키는 애니메이션 */
@keyframes roty-y {
    to {
        transform: rotateY(360deg);
    }
}
